global
    maxconn 256

defaults
    log     global
    mode    http
    option  httplog
    option  dontlognull
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

frontend stats
    bind *:8404
    stats enable
    stats uri /stats
    stats refresh 10s
    stats admin if TRUE

frontend entrypoint
    bind *:8405
    default_backend nodes

backend nodes
    balance roundrobin
    option forwardfor
    http-request set-header X-Proxy-Name ${HAPROXY_PROXY_NAME}
    server pgslave1 pgslave1:5432
    server pgslave2 pgslave2:5432
